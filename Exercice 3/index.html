<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercice JavaScript 3</title>
</head>
<body>

    <main>
        <div class="boxes"></div>
    </main>

    <script>

        // On cr√©e une div avec la classe box
        const box = document.createElement("div")
        const turn = document.createElement("h3")
        // On lui ajoute la classe box
        box.classList.add("box")
        turn.classList.add("turn")

        // On stock la div boxes dans une variable
        const boxes = document.querySelector(".boxes")
        const main = document.querySelector("main")
        
        main.appendChild(turn)
        turn.innerText = "C'est au tour de ‚ùå"

        // On cr√©e une boucle qui va cr√©er 4 divs avec la classe box
        for(let i = 1; i <= 9; i++) {
            // On clone la div box
            let newbox = box.cloneNode()
            // On ajoute les nouvelles divs dans la div parent boxes
            boxes.appendChild(newbox)
        }

        let currentPlayer = "‚ùå"

        // Fonction de gestion de l'√©v√©nement de clic
        function handleBoxClick(event) {
            const clickedBox = event.target

            //  v√©rification si la case est d√©j√† remplie est utilis√© pour sortir imm√©diatement de la fonction 
            if (clickedBox.textContent !== "") {
                return
            }

            // Mettre la valeur du joueur actif (X ou O) dans la case
            clickedBox.textContent = currentPlayer

            // Alterner le joueur actif
            currentPlayer = currentPlayer === "‚ùå" ? "üü¢" : "‚ùå"

            // Mettre √† jour le contenu de la balise h3 avec le joueur actif
            turn.innerText = "C'est au tour de " + currentPlayer
            
            // V√©rification si toutes les cases sont remplies
            let isGridFull = Array.from(allBoxes).every(function(box) {
                return box.textContent !== "";
            });


            if (isGridFull) {
                turn.innerText = "Partie termin√©e"
            } else {
                // Mettre √† jour le contenu de la balise h3 avec le joueur actif
                turn.innerText = "C'est au tour de " + currentPlayer
            }
            
        }

        // Ajouter un gestionnaire d'√©v√©nements de clic √† chaque case
        const allBoxes = document.querySelectorAll(".box")
        allBoxes.forEach(function(box) {
            box.addEventListener("click", handleBoxClick);
        });

    </script>
</body>
</html>